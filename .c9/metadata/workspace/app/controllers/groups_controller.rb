{"filter":false,"title":"groups_controller.rb","tooltip":"/app/controllers/groups_controller.rb","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":58,"column":10},"end":{"row":58,"column":11},"action":"insert","lines":["e"],"id":361}],[{"start":{"row":58,"column":11},"end":{"row":58,"column":12},"action":"insert","lines":["g"],"id":362}],[{"start":{"row":58,"column":12},"end":{"row":58,"column":13},"action":"insert","lines":["i"],"id":363}],[{"start":{"row":58,"column":13},"end":{"row":58,"column":14},"action":"insert","lines":["n"],"id":364}],[{"start":{"row":58,"column":4},"end":{"row":58,"column":8},"action":"remove","lines":["    "],"id":365}],[{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"remove","lines":["    "],"id":366}],[{"start":{"row":57,"column":37},"end":{"row":58,"column":0},"action":"remove","lines":["",""],"id":367}],[{"start":{"row":57,"column":37},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":368},{"start":{"row":58,"column":0},"end":{"row":58,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":58,"column":4},"end":{"row":58,"column":8},"action":"remove","lines":["    "],"id":369}],[{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"remove","lines":["    "],"id":370}],[{"start":{"row":57,"column":37},"end":{"row":58,"column":0},"action":"remove","lines":["",""],"id":371}],[{"start":{"row":57,"column":37},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":372},{"start":{"row":58,"column":0},"end":{"row":58,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":58,"column":4},"end":{"row":58,"column":8},"action":"remove","lines":["    "],"id":373}],[{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"remove","lines":["    "],"id":374}],[{"start":{"row":70,"column":8},"end":{"row":71,"column":0},"action":"insert","lines":["",""],"id":375},{"start":{"row":71,"column":0},"end":{"row":71,"column":5},"action":"insert","lines":["     "]}],[{"start":{"row":71,"column":5},"end":{"row":71,"column":6},"action":"insert","lines":["="],"id":376}],[{"start":{"row":71,"column":6},"end":{"row":71,"column":7},"action":"insert","lines":["e"],"id":377}],[{"start":{"row":71,"column":7},"end":{"row":71,"column":8},"action":"insert","lines":["n"],"id":378}],[{"start":{"row":71,"column":8},"end":{"row":71,"column":9},"action":"insert","lines":["d"],"id":379}],[{"start":{"row":71,"column":4},"end":{"row":71,"column":5},"action":"remove","lines":[" "],"id":380}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":381}],[{"start":{"row":58,"column":1},"end":{"row":58,"column":2},"action":"remove","lines":["B"],"id":382}],[{"start":{"row":58,"column":1},"end":{"row":58,"column":2},"action":"insert","lines":["b"],"id":383}],[{"start":{"row":256,"column":44},"end":{"row":257,"column":0},"action":"insert","lines":["",""],"id":392},{"start":{"row":257,"column":0},"end":{"row":257,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":257,"column":4},"end":{"row":267,"column":37},"action":"insert","lines":["        @post = Post.new","        @posts = @group.posts.paginate(page: params[:page], :per_page => 8)","        @user = current_user","        @users = @group.users","        @album = Album.new","        @mem_users = User.where(['id IN (?)', @group.user_groups.where('invitation = ? AND is_admin = ?',Uc_enum::JOINED,false).collect(&:user_id)])","        @ad_users = User.where(['id IN (?)', @group.user_groups.where('invitation = ? AND is_admin = ?',Uc_enum::JOINED,true).collect(&:user_id)])","        @all_users =  @group.user_groups.where('invitation = ? ',Uc_enum::JOINED)","        @is_admin = @ad_users.include? current_user","        @ucs = @group.user_groups.where(\"user_id = ?  AND is_admin=?\",current_user.id, true )","        @community = active_community"],"id":393}],[{"start":{"row":269,"column":0},"end":{"row":270,"column":0},"action":"insert","lines":["",""],"id":394}],[{"start":{"row":269,"column":0},"end":{"row":269,"column":1},"action":"insert","lines":["="],"id":395}],[{"start":{"row":269,"column":1},"end":{"row":269,"column":2},"action":"insert","lines":["b"],"id":396}],[{"start":{"row":269,"column":2},"end":{"row":269,"column":3},"action":"insert","lines":["e"],"id":397}],[{"start":{"row":269,"column":3},"end":{"row":269,"column":4},"action":"insert","lines":["g"],"id":398}],[{"start":{"row":269,"column":4},"end":{"row":269,"column":5},"action":"insert","lines":["i"],"id":399}],[{"start":{"row":269,"column":5},"end":{"row":269,"column":6},"action":"insert","lines":["n"],"id":400}],[{"start":{"row":274,"column":8},"end":{"row":275,"column":0},"action":"insert","lines":["",""],"id":401},{"start":{"row":275,"column":0},"end":{"row":275,"column":5},"action":"insert","lines":["     "]}],[{"start":{"row":275,"column":4},"end":{"row":275,"column":5},"action":"remove","lines":[" "],"id":402}],[{"start":{"row":275,"column":0},"end":{"row":275,"column":4},"action":"remove","lines":["    "],"id":403}],[{"start":{"row":274,"column":8},"end":{"row":275,"column":0},"action":"remove","lines":["",""],"id":404}],[{"start":{"row":274,"column":8},"end":{"row":275,"column":0},"action":"insert","lines":["",""],"id":405},{"start":{"row":275,"column":0},"end":{"row":275,"column":5},"action":"insert","lines":["     "]}],[{"start":{"row":275,"column":4},"end":{"row":275,"column":5},"action":"remove","lines":[" "],"id":406}],[{"start":{"row":275,"column":0},"end":{"row":275,"column":4},"action":"remove","lines":["    "],"id":407}],[{"start":{"row":275,"column":0},"end":{"row":275,"column":1},"action":"insert","lines":["="],"id":408}],[{"start":{"row":275,"column":1},"end":{"row":275,"column":2},"action":"insert","lines":["e"],"id":409}],[{"start":{"row":275,"column":2},"end":{"row":275,"column":3},"action":"insert","lines":["n"],"id":410}],[{"start":{"row":275,"column":3},"end":{"row":275,"column":4},"action":"insert","lines":["d"],"id":411}],[{"start":{"row":324,"column":0},"end":{"row":325,"column":0},"action":"insert","lines":["  redirect_to @group",""],"id":412}],[{"start":{"row":323,"column":0},"end":{"row":324,"column":0},"action":"remove","lines":["  redirect_to @group",""],"id":413},{"start":{"row":324,"column":0},"end":{"row":325,"column":0},"action":"insert","lines":["  redirect_to @group",""]}],[{"start":{"row":324,"column":0},"end":{"row":325,"column":0},"action":"remove","lines":["  redirect_to @group",""],"id":414},{"start":{"row":325,"column":0},"end":{"row":326,"column":0},"action":"insert","lines":["  redirect_to @group",""]}],[{"start":{"row":325,"column":0},"end":{"row":326,"column":0},"action":"remove","lines":["  redirect_to @group",""],"id":415},{"start":{"row":326,"column":0},"end":{"row":327,"column":0},"action":"insert","lines":["  redirect_to @group",""]}],[{"start":{"row":326,"column":0},"end":{"row":327,"column":0},"action":"remove","lines":["  redirect_to @group",""],"id":416},{"start":{"row":327,"column":0},"end":{"row":328,"column":0},"action":"insert","lines":["  redirect_to @group",""]}],[{"start":{"row":327,"column":0},"end":{"row":328,"column":0},"action":"remove","lines":["  redirect_to @group",""],"id":417},{"start":{"row":328,"column":0},"end":{"row":329,"column":0},"action":"insert","lines":["  redirect_to @group",""]}],[{"start":{"row":328,"column":2},"end":{"row":328,"column":20},"action":"remove","lines":["redirect_to @group"],"id":418},{"start":{"row":328,"column":2},"end":{"row":328,"column":111},"action":"insert","lines":["redirect_to :controller => 'communities', :action => 'show_group', :grp_id => @group.id, id: params[:comm_id]"]}],[{"start":{"row":328,"column":56},"end":{"row":328,"column":66},"action":"remove","lines":["show_group"],"id":419},{"start":{"row":328,"column":56},"end":{"row":328,"column":57},"action":"insert","lines":["g"]}],[{"start":{"row":328,"column":57},"end":{"row":328,"column":58},"action":"insert","lines":["r"],"id":420}],[{"start":{"row":328,"column":58},"end":{"row":328,"column":59},"action":"insert","lines":["o"],"id":421}],[{"start":{"row":328,"column":59},"end":{"row":328,"column":60},"action":"insert","lines":["u"],"id":422}],[{"start":{"row":328,"column":60},"end":{"row":328,"column":61},"action":"insert","lines":["p"],"id":423}],[{"start":{"row":328,"column":61},"end":{"row":328,"column":62},"action":"insert","lines":["s"],"id":424}],[{"start":{"row":328,"column":62},"end":{"row":328,"column":63},"action":"insert","lines":["_"],"id":425}],[{"start":{"row":328,"column":56},"end":{"row":328,"column":63},"action":"remove","lines":["groups_"],"id":426},{"start":{"row":328,"column":56},"end":{"row":329,"column":2},"action":"insert","lines":["groups_com","  "]}],[{"start":{"row":329,"column":1},"end":{"row":329,"column":2},"action":"remove","lines":[" "],"id":427}],[{"start":{"row":329,"column":0},"end":{"row":329,"column":1},"action":"remove","lines":[" "],"id":428}],[{"start":{"row":328,"column":66},"end":{"row":329,"column":0},"action":"remove","lines":["",""],"id":429}],[{"start":{"row":328,"column":69},"end":{"row":328,"column":90},"action":"remove","lines":[":grp_id => @group.id,"],"id":430}],[{"start":{"row":328,"column":69},"end":{"row":328,"column":70},"action":"remove","lines":[" "],"id":431}],[{"start":{"row":328,"column":73},"end":{"row":328,"column":89},"action":"remove","lines":["params[:comm_id]"],"id":432}],[{"start":{"row":328,"column":73},"end":{"row":328,"column":74},"action":"insert","lines":["a"],"id":433}],[{"start":{"row":328,"column":74},"end":{"row":328,"column":75},"action":"insert","lines":["c"],"id":434}],[{"start":{"row":328,"column":75},"end":{"row":328,"column":76},"action":"insert","lines":["t"],"id":435}],[{"start":{"row":328,"column":73},"end":{"row":328,"column":76},"action":"remove","lines":["act"],"id":436},{"start":{"row":328,"column":73},"end":{"row":328,"column":89},"action":"insert","lines":["active_community"]}],[{"start":{"row":328,"column":89},"end":{"row":328,"column":90},"action":"insert","lines":["."],"id":437}],[{"start":{"row":328,"column":90},"end":{"row":328,"column":91},"action":"insert","lines":["i"],"id":438}],[{"start":{"row":328,"column":91},"end":{"row":328,"column":92},"action":"insert","lines":["d"],"id":439}],[{"start":{"row":328,"column":0},"end":{"row":329,"column":0},"action":"remove","lines":["  redirect_to :controller => 'communities', :action => 'groups_com', id: active_community.id",""],"id":440}],[{"start":{"row":12,"column":33},"end":{"row":13,"column":0},"action":"insert","lines":["",""],"id":441},{"start":{"row":13,"column":0},"end":{"row":13,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":13,"column":3},"end":{"row":14,"column":0},"action":"insert","lines":["",""],"id":442},{"start":{"row":14,"column":0},"end":{"row":14,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":14,"column":3},"end":{"row":15,"column":0},"action":"insert","lines":["",""],"id":443},{"start":{"row":15,"column":0},"end":{"row":15,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":12,"column":3},"end":{"row":12,"column":4},"action":"insert","lines":["#"],"id":444}],[{"start":{"row":11,"column":3},"end":{"row":11,"column":4},"action":"insert","lines":["#"],"id":445}],[{"start":{"row":8,"column":4},"end":{"row":8,"column":5},"action":"insert","lines":["#"],"id":446}],[{"start":{"row":13,"column":3},"end":{"row":26,"column":54},"action":"insert","lines":["@community = Community.find(params[:id])","    @selected_community = @community","    @selected_community.req_pending_cnt = User.where(['id IN (?)' , @community.requested_uc.collect(&:user_id)]).count","    @community.req_pending_cnt = @selected_community.req_pending_cnt","    @my_groups_ids = current_user.user_groups.where(\"community_id = ? AND invitation = ? \", @selected_community.id, Uc_enum::JOINED ).collect(&:group_id).uniq","    @groups = Group.where('id IN (?)', @my_groups_ids)","    @other_groups = []","    if @my_groups_ids.blank?","      @other_groups = Group.where(\"community_id = ? AND privacy != ?\", @selected_community.id, Privacyenum::PRIVATE )","    else","      @other_groups = Group.where(\"community_id = ? AND id NOT IN (?) AND privacy != ?\", @selected_community.id, @my_groups_ids, Privacyenum::PRIVATE)","    end","    @group_ids = current_user.invited_groups.collect(&:group_id)","    @inv_groups = Group.where('id IN (?)', @group_ids)"],"id":447}],[{"start":{"row":27,"column":2},"end":{"row":27,"column":3},"action":"remove","lines":[" "],"id":448}],[{"start":{"row":27,"column":1},"end":{"row":27,"column":2},"action":"remove","lines":[" "],"id":449}],[{"start":{"row":27,"column":0},"end":{"row":27,"column":1},"action":"remove","lines":[" "],"id":450}],[{"start":{"row":26,"column":54},"end":{"row":27,"column":0},"action":"remove","lines":["",""],"id":451}],[{"start":{"row":26,"column":54},"end":{"row":27,"column":3},"action":"remove","lines":["","   "],"id":452}],[{"start":{"row":341,"column":33},"end":{"row":342,"column":0},"action":"insert","lines":["",""],"id":453},{"start":{"row":342,"column":0},"end":{"row":342,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":342,"column":2},"end":{"row":342,"column":29},"action":"insert","lines":["redirect_to action: \"index\""],"id":454}],[{"start":{"row":342,"column":29},"end":{"row":342,"column":42},"action":"insert","lines":[", status: 303"],"id":455}],[{"start":{"row":342,"column":42},"end":{"row":342,"column":64},"action":"insert","lines":[", id: params[:comm_id]"],"id":456}],[{"start":{"row":342,"column":48},"end":{"row":342,"column":64},"action":"remove","lines":["params[:comm_id]"],"id":457},{"start":{"row":342,"column":48},"end":{"row":342,"column":49},"action":"insert","lines":["a"]}],[{"start":{"row":342,"column":49},"end":{"row":342,"column":50},"action":"insert","lines":["c"],"id":458}],[{"start":{"row":342,"column":50},"end":{"row":342,"column":51},"action":"insert","lines":["t"],"id":459}],[{"start":{"row":342,"column":51},"end":{"row":342,"column":52},"action":"insert","lines":["i"],"id":460}],[{"start":{"row":342,"column":52},"end":{"row":342,"column":53},"action":"insert","lines":["v"],"id":461}],[{"start":{"row":342,"column":53},"end":{"row":342,"column":54},"action":"insert","lines":["e"],"id":462}],[{"start":{"row":341,"column":2},"end":{"row":341,"column":3},"action":"insert","lines":["#"],"id":463}],[{"start":{"row":342,"column":54},"end":{"row":342,"column":55},"action":"insert","lines":["_"],"id":464}],[{"start":{"row":342,"column":48},"end":{"row":342,"column":55},"action":"remove","lines":["active_"],"id":465},{"start":{"row":342,"column":48},"end":{"row":342,"column":64},"action":"insert","lines":["active_community"]}],[{"start":{"row":342,"column":64},"end":{"row":342,"column":65},"action":"insert","lines":["."],"id":466}],[{"start":{"row":342,"column":65},"end":{"row":342,"column":66},"action":"insert","lines":["i"],"id":467}],[{"start":{"row":342,"column":66},"end":{"row":342,"column":67},"action":"insert","lines":["d"],"id":468}],[{"start":{"row":341,"column":2},"end":{"row":341,"column":3},"action":"remove","lines":["#"],"id":469}]]},"ace":{"folds":[],"scrolltop":4612,"scrollleft":0,"selection":{"start":{"row":341,"column":2},"end":{"row":341,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":328,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1437127848291,"hash":"06238b385acfb7784049045d90079b3030937ed2"}