{"filter":false,"title":"_show_event.html.erb","tooltip":"/app/views/communities/_show_event.html.erb","undoManager":{"mark":-1,"position":-1,"stack":[[{"start":{"row":271,"column":0},"end":{"row":344,"column":0},"action":"remove","lines":["","$(\"#edit_event\").click(function(){","      $('#modal_edit_event').modal({","        backdrop: \"static\"","      });","    });","    $(\"#closeX_edit_event\").click(function(){","          $('#modal_edit_event').modal('hide');","        });","","    $(\"#update_event\").click(function(){","      $('.loading_page').show();","        });","","    $(\"#event_edit_pic\").click(function(){","      $('#pic2').click();","    });","","var imageLoader = document.getElementById('pic2');","imageLoader.addEventListener('change', handleImage, false);","$(\"#imageCanvas2\").click(function(){","  $(\"#pic2\").click();","});","var canvas = document.getElementById('imageCanvas2');","var ctx = canvas.getContext('2d');","ctx.font=\"30px Arial\";","ctx.fillText(\"Change picture\",10,50);","","function handleImage(e){","  var canvas = document.getElementById('imageCanvas2');","  var ctx = canvas.getContext('2d');","  var iCnt=0;","  var files = e.target.files;","  canvas.width = 180;","  canvas.height = 155*(Math.ceil(files.length/4));","     if(files.length<1){","      $('#pic2').val('');","      $('#event_edit_pic').show();","      $('#imageCanvas2').hide();","      return;","    }","  for( var i = 0, len = files.length; i < len; i++) ","  {","          $('#event_edit_pic').hide();","          $('#imageCanvas2').show();","    if(files[i])","    {","      var reader = new FileReader();","      reader.onload = function(event){","        var img = new Image();","","        img.onload = function(){","          var ratioPx = 150;","          var sWidth =ratioPx;","          var ratio = img.width/sWidth;","          var sHeight = img.height/ratio;   ","          if(sHeight>ratioPx){","           sHeight =ratioPx;","           ratio = img.height/sHeight;","           sWidth = img.width/ratio;  ","         }","         ctx.drawImage(img, 155*(iCnt%4),155*(Math.floor(iCnt/4)),sWidth,sHeight);","                  //ctx.drawImage(img,0,0,sWidth,sHeight);","                  iCnt++;","                }","                img.src = event.target.result;","              }","              reader.readAsDataURL(e.target.files[i]);     ","            }","          }","        }","","",""],"id":16},{"start":{"row":270,"column":0},"end":{"row":343,"column":0},"action":"insert","lines":["","$(\"#edit_event\").click(function(){","      $('#modal_edit_event').modal({","        backdrop: \"static\"","      });","    });","    $(\"#closeX_edit_event\").click(function(){","          $('#modal_edit_event').modal('hide');","        });","","    $(\"#update_event\").click(function(){","      $('.loading_page').show();","        });","","    $(\"#event_edit_pic\").click(function(){","      $('#pic2').click();","    });","","var imageLoader = document.getElementById('pic2');","imageLoader.addEventListener('change', handleImage, false);","$(\"#imageCanvas2\").click(function(){","  $(\"#pic2\").click();","});","var canvas = document.getElementById('imageCanvas2');","var ctx = canvas.getContext('2d');","ctx.font=\"30px Arial\";","ctx.fillText(\"Change picture\",10,50);","","function handleImage(e){","  var canvas = document.getElementById('imageCanvas2');","  var ctx = canvas.getContext('2d');","  var iCnt=0;","  var files = e.target.files;","  canvas.width = 180;","  canvas.height = 155*(Math.ceil(files.length/4));","     if(files.length<1){","      $('#pic2').val('');","      $('#event_edit_pic').show();","      $('#imageCanvas2').hide();","      return;","    }","  for( var i = 0, len = files.length; i < len; i++) ","  {","          $('#event_edit_pic').hide();","          $('#imageCanvas2').show();","    if(files[i])","    {","      var reader = new FileReader();","      reader.onload = function(event){","        var img = new Image();","","        img.onload = function(){","          var ratioPx = 150;","          var sWidth =ratioPx;","          var ratio = img.width/sWidth;","          var sHeight = img.height/ratio;   ","          if(sHeight>ratioPx){","           sHeight =ratioPx;","           ratio = img.height/sHeight;","           sWidth = img.width/ratio;  ","         }","         ctx.drawImage(img, 155*(iCnt%4),155*(Math.floor(iCnt/4)),sWidth,sHeight);","                  //ctx.drawImage(img,0,0,sWidth,sHeight);","                  iCnt++;","                }","                img.src = event.target.result;","              }","              reader.readAsDataURL(e.target.files[i]);     ","            }","          }","        }","","",""]}]]},"ace":{"folds":[],"scrolltop":3102,"scrollleft":0,"selection":{"start":{"row":270,"column":0},"end":{"row":270,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":257,"state":"js-start","mode":"ace/mode/html_ruby"}},"timestamp":1438757016531,"hash":"f307ec1c88f8173f4eb0b05d6b889ec7d668c3e5"}